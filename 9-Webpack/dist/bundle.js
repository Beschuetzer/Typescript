(()=>{"use strict";var t,e,n=function(t,e,n,r){this.title=t,this.description=e,this.people=n,this.status=r,this.id=Math.random().toString()};function r(t,e,n){var r=n.value;return{configurable:!0,get:function(){return r.bind(this)}}}!function(t){t[t.Active=0]="Active",t[t.Finished=1]="Finished"}(t||(t={})),function(t){t.start="afterbegin",t.end="beforeend"}(e||(e={}));var o=function(){function t(t,e,n,r){this.templateElement=document.getElementById(t),this.hostElement=document.getElementById(e);var o=document.importNode(this.templateElement.content,!0);this.element=o.firstElementChild,r&&(this.element.id=r),this.attach(n)}return t.prototype.attach=function(t){this.hostElement.insertAdjacentElement(t,this.element)},t}();function i(t){return t.required&&0===t.value.toString().trim().length?{error:t.inputName+" is required."}:null!=t.minLength&&"string"==typeof t.value&&t.value.trim().length<t.minLength?{error:t.value+" is shorter than "+t.minLength+" in "+t.inputName+"!"}:null!=t.maxLength&&"string"==typeof t.value&&t.value.trim().length>t.maxLength?{error:t.value+" is longer than "+t.maxLength+" in "+t.inputName+"!"}:null!=t.min&&"number"==typeof t.value&&t.value<t.min?{error:t.value+" is shorter than "+t.min+" in "+t.inputName+"!"}:null!=t.max&&"number"==typeof t.value&&t.value>t.max?{error:t.value+" is longer than "+t.max+" in "+t.inputName+"!"}:{error:null}}var s,a,l=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(e){function r(){var t=e.call(this)||this;return t.projects=[],t}return l(r,e),r.getInstance=function(){return this.instance||(this.instance=new r),this.instance},r.prototype.addProject=function(e,r,o){this.projects.push(new n(e,r,o,t.Active)),this.updateListeners()},r.prototype.moveProject=function(t,e){var n=this.projects.find((function(e){return e.id===t}));n&&e!==n.status?n.status=e:console.log("error moving project...."),this.updateListeners()},r.prototype.updateListeners=function(){for(var t=0,e=this.listeners;t<e.length;t++)(0,e[t])(this.projects.slice())},r}(function(){function t(){this.listeners=[]}return t.prototype.addListener=function(t){this.listeners.push(t)},t}()).getInstance(),c=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(t){function n(){var n=t.call(this,"project-input","app",e.start,"user-input")||this;return n.titleInputElement=document.querySelector("#title"),n.descriptionElement=document.querySelector("#description"),n.peopleInputElement=document.querySelector("#people"),n.configure(),n}return c(n,t),n.prototype.configure=function(){this.element.addEventListener("submit",this.submitHandler)},n.prototype.renderContent=function(){},n.prototype.gatherUserInput=function(){var t=this.titleInputElement.value,e=this.descriptionElement.value,n=this.peopleInputElement.value,r={value:e,inputName:"Description",required:!0,minLength:5,maxLength:100},o={value:n,inputName:"People",required:!0,min:1,max:100},s=i({value:t,inputName:"Title",required:!0,minLength:5,maxLength:20}),a=i(r),l=i(o),u=!0;if(s.error&&(alert(s.error),u=!1),a.error&&(alert(a.error),u=!1),l.error&&(alert(l.error),u=!1),u)return[t,e,+n]},n.prototype.clearInputs=function(){this.titleInputElement.value="",this.descriptionElement.value="",this.peopleInputElement.value=""},n.prototype.submitHandler=function(t){t.preventDefault();var e=this.gatherUserInput();if(Array.isArray(e)){var n=e[0],r=e[1],o=e[2];console.log("title =",n),console.log("description =",r),console.log("people =",o),u.addProject(n,r,o),this.clearInputs()}},function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);i>3&&s&&Object.defineProperty(e,n,s)}([r],n.prototype,"submitHandler",null),n}(o),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},h=function(t){function n(n,r){var o=t.call(this,"single-project",n,e.end,r.id)||this;return o.hostId=n,o.project=r,o.configure(),o.renderContent(),o}return f(n,t),Object.defineProperty(n.prototype,"personsMsg",{get:function(){var t=this.project.people,e="people";return 1===this.project.people&&(e="person"),t+" "+e+" currently assigned."},enumerable:!1,configurable:!0}),n.prototype.dragStartHandler=function(t){t.dataTransfer.setData("text/plain",this.project.id),t.dataTransfer.effectAllowed="move"},n.prototype.dragEndHandler=function(t){},n.prototype.configure=function(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)},n.prototype.renderContent=function(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.personsMsg,this.element.querySelector("p").textContent=this.project.description},d([r],n.prototype,"dragStartHandler",null),d([r],n.prototype,"dragEndHandler",null),n}(o),y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(n){function r(t){var r=n.call(this,"project-list","app",e.end,t+"-projects")||this;return r.type=t,r.assignedProjects=[],r.configure(),r.renderContent(),r}return y(r,n),r.prototype.dragLeaveHandler=function(t){this.element.querySelector("ul").classList.remove("droppable")},r.prototype.dropHandler=function(e){u.moveProject(e.dataTransfer.getData("text/plain"),"active"===this.type?t.Active:t.Finished)},r.prototype.dragOverHandler=function(t){t.dataTransfer&&"text/plain"===t.dataTransfer.types[0]&&(t.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))},r.prototype.renderContent=function(){var t=this.type+"-projects-list";this.element.querySelector("ul").id=t,this.element.querySelector("h2").textContent=this.type.toUpperCase()+" PROJECTS"},r.prototype.configure=function(){var e=this;u.addListener((function(n){var r=n.filter((function(n){return"active"===e.type?n.status===t.Active:n.status===t.Finished}));e.assignedProjects=r,e.renderProjects()})),this.element.addEventListener("dragover",this.dragOverHandler.bind(this)),this.element.addEventListener("dragleave",this.dragLeaveHandler.bind(this)),this.element.addEventListener("drop",this.dropHandler.bind(this))},r.prototype.renderProjects=function(){document.getElementById(this.type+"-projects-list").innerHTML="";for(var t=0,e=this.assignedProjects;t<e.length;t++){var n=e[t];new h(this.element.querySelector("ul").id,n)}},r}(o);a||(a={}),new p,new m("active"),new m("finished")})();